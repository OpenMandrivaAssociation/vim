To: vim_dev@googlegroups.com
Subject: Patch 7.4.1345
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
------------

Patch 7.4.1345
Problem:    A few more compiler warnings. (Axel Bender)
Solution:   Add type casts.
Files:      src/gui_w32.c, src/gui_w48.c


*** ../vim-7.4.1344/src/gui_w32.c	2016-02-17 12:30:12.024840359 +0100
--- src/gui_w32.c	2016-02-17 20:45:36.413316682 +0100
***************
*** 1772,1778 ****
  # if !defined(_MSC_VER) || (_MSC_VER < 1400)
  /* Define HandleToLong for old MS and non-MS compilers if not defined. */
  #  ifndef HandleToLong
! #   define HandleToLong(h) ((long)(h))
  #  endif
  # endif
      /* set the v:windowid variable */
--- 1772,1778 ----
  # if !defined(_MSC_VER) || (_MSC_VER < 1400)
  /* Define HandleToLong for old MS and non-MS compilers if not defined. */
  #  ifndef HandleToLong
! #   define HandleToLong(h) ((long)(intptr_t)(h))
  #  endif
  # endif
      /* set the v:windowid variable */
*** ../vim-7.4.1344/src/gui_w48.c	2016-02-16 20:09:07.869342551 +0100
--- src/gui_w48.c	2016-02-17 20:41:16.104195209 +0100
***************
*** 2442,2448 ****
  	info.fMask = MIIM_TYPE | MIIM_ID;
  	info.wID = item_id;
  	info.fType = MFT_STRING;
! 	info.dwTypeData = item_text;
  	info.cch = (UINT)STRLEN(item_text);
  	InsertMenuItem(pmenu, item_id, FALSE, &info);
      }
--- 2442,2448 ----
  	info.fMask = MIIM_TYPE | MIIM_ID;
  	info.wID = item_id;
  	info.fType = MFT_STRING;
! 	info.dwTypeData = (LPTSTR)item_text;
  	info.cch = (UINT)STRLEN(item_text);
  	InsertMenuItem(pmenu, item_id, FALSE, &info);
      }
*** ../vim-7.4.1344/src/version.c	2016-02-17 12:30:12.024840359 +0100
--- src/version.c	2016-02-17 20:47:58.827744978 +0100
***************
*** 749,750 ****
--- 749,752 ----
  {   /* Add new patch number below this line */
+ /**/
+     1345,
  /**/

-- 
            ### Hiroshima 45, Chernobyl 86, Windows 95 ###

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///        sponsor Vim, vote for features -- http://www.Vim.org/sponsor/ \\\
\\\  an exciting new programming language -- http://www.Zimbu.org        ///
 \\\            help me help AIDS victims -- http://ICCF-Holland.org    ///
